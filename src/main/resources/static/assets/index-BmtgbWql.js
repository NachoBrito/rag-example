(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();var u=new WebSocket("ws://"+location.hostname+":"+location.port+"/ws/events");u.onclose=function(){alert("WebSocket connection closed")};u.onmessage=function(e){let t=JSON.parse(e.data);if(console.info(t),t.message_type){let s=new CustomEvent(t.message_type.toLowerCase()+"-received",{detail:{message:t,timestamp:Date.now()}});console.info("Dispatching event:"),console.info(s),document.dispatchEvent(s)}else console.error("Cannot process message! ")};function m(e){e!==""&&u.send(e)}function p(e){console.log(e),m(JSON.stringify(e.detail))}document.addEventListener("user-talked",p);const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function g(e,t=0){return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}let a;const y=new Uint8Array(16);function f(){if(!a){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");a=crypto.getRandomValues.bind(crypto)}return a(y)}const v=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),l={randomUUID:v};function h(e,t,s){var n;if(l.randomUUID&&!e)return l.randomUUID();e=e||{};const c=e.random??((n=e.rng)==null?void 0:n.call(e))??f();if(c.length<16)throw new Error("Random bytes length must be >= 16");return c[6]=c[6]&15|64,c[8]=c[8]&63|128,g(c)}const E=document.getElementById("remo-textbox-ptt"),i=document.getElementById("remo-textbox-field");i.focus();E.addEventListener("click",b);function b(e){e.preventDefault();const t=i.value;if(t===""){console.debug("Nothing to send.");return}const s=new CustomEvent("user-talked",{detail:{queryId:h(),message:t,timestamp:Date.now()}});document.dispatchEvent(s),i.value="",i.focus()}function I(e){const t=document.getElementById("remo-conversation"),s=e.detail.queryId,c=e.detail.message;let n=document.getElementById("user-message-"+s);n||(n=document.createElement("div"),n.classList.add("chat","user"),n.id="user-message-"+s,t.appendChild(n)),n.innerHTML=c}function w(e){console.info(e);const t=document.getElementById("remo-conversation"),s=e.detail.message,c=s.queryId,n=s.isComplete,r=s.tokens;let d=document.getElementById("response-"+c);d||(d=document.createElement("div"),d.classList.add("chat","bot"),d.id="response-"+c,t.appendChild(d)),r&&(d.innerHTML+=r),n&&d.classList.add("complete")}document.addEventListener("response-tokens-received",w);document.addEventListener("user-talked",I);
